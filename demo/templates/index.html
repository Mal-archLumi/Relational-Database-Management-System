{% extends "base.html" %}

{% block title %}Query Editor - MALDB{% endblock %}

{% block content %}
<div class="page" id="queryPage">
    <div class="page-header">
        <h1 class="page-title">Query Editor</h1>
        <p class="page-subtitle">Execute SQL queries with real-time results</p>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">SQL Editor</h2>
            <div class="sql-toolbar">
                <button class="toolbar-btn primary" id="executeBtn">
                    Execute Query
                </button>
                <button class="toolbar-btn" id="clearBtn">
                    Clear Editor
                </button>
                <button class="toolbar-btn" onclick="maldb.insertIntoEditor('SELECT * FROM users')">
                    Quick SELECT
                </button>
                <button class="toolbar-btn" onclick="maldb.insertIntoEditor('CREATE TABLE example (id INT PRIMARY KEY, data TEXT ENCRYPTED)')">
                    Quick CREATE
                </button>
            </div>
        </div>
        
        <form id="queryForm" onsubmit="return false;">
            <div class="sql-editor-container">
                <textarea id="sqlEditor" placeholder="Enter your SQL query here...
Example: SELECT * FROM users WHERE id = 1

Keyboard shortcuts:
• Ctrl+Enter : Execute query
• Tab        : Insert 4 spaces" autofocus></textarea>
                <div class="sql-hint">
                    Press Ctrl+Enter to execute query
                </div>
            </div>
        </form>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Results</h2>
        </div>
        <div id="resultsContainer">
            <div class="loading">
                Ready for queries. Enter a SQL command above and click "Execute Query"
            </div>
        </div>
    </div>
</div>

<div class="page" id="tablesPage" style="display: none;">
    <div class="page-header">
        <h1 class="page-title">Database Tables</h1>
        <p class="page-subtitle">Manage and inspect your database tables</p>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Tables Overview</h2>
            <button class="toolbar-btn primary" onclick="maldb.navigateTo('query')">
                New Query
            </button>
        </div>
        
        <div id="tablesContainer">
            <div class="loading">
                Loading tables...
            </div>
        </div>
    </div>
</div>

<div class="page" id="historyPage" style="display: none;">
    <div class="page-header">
        <h1 class="page-title">Query History</h1>
        <p class="page-subtitle">Review previously executed queries</p>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Recent Queries</h2>
            <button class="toolbar-btn" id="clearHistoryBtn">
                Clear History
            </button>
        </div>
        
        <div class="history-content">
            <div style="text-align: center; padding: 48px 24px; color: var(--text-tertiary);">
                <p>Query history will be displayed here</p>
                <p style="font-size: 14px; margin-top: 8px;">Execute some queries first</p>
            </div>
        </div>
    </div>
</div>

<div class="page" id="monitorPage" style="display: none;">
    <div class="page-header">
        <h1 class="page-title">System Monitor</h1>
        <p class="page-subtitle">Real-time database performance metrics</p>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Performance Dashboard</h2>
            <button class="toolbar-btn" id="refreshMonitorBtn">
                Refresh
            </button>
        </div>
        
        <div class="monitor-content">
            <div style="text-align: center; padding: 48px 24px; color: var(--text-tertiary);">
                <p>System monitoring dashboard</p>
                <p style="font-size: 14px; margin-top: 8px;">Execute some queries to see statistics</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}